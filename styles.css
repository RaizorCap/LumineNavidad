:root{
  --bg0:#06020a;
  --bg1:#12091a;
  --ink:#eeeaff;
  --muted:#c3bddf;

  --purple:#7c3aed;
  --purple2:#a78bfa;
  --gold:#f6d58b;
  --silver:#d7d7e3;

  --card: rgba(255,255,255,.055);
  --stroke: rgba(255,255,255,.12);

  --shadow: 0 18px 60px rgba(0,0,0,.55);
  --r: 22px;
}

*{ box-sizing:border-box; }
html,body{ height:100%; }

body{
  margin:0;
  color:var(--ink);
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  background:
    radial-gradient(900px 600px at 18% 8%, rgba(124,58,237,.22), transparent 60%),
    radial-gradient(900px 600px at 85% 25%, rgba(167,139,250,.15), transparent 62%),
    radial-gradient(800px 560px at 55% 92%, rgba(246,213,139,.10), transparent 60%),
    linear-gradient(180deg, var(--bg0), var(--bg1));
  overflow-x:hidden;
}

.wrap{
  max-width: 1040px;
  margin: 0 auto;
  padding: 16px 14px 70px;
}

.topbar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  padding: 10px 6px;
}
.brand{ display:flex; align-items:center; gap:10px; }
.brandDot{
  width:12px;height:12px;border-radius:99px;
  background: linear-gradient(135deg, var(--purple), var(--gold));
  box-shadow: 0 0 18px rgba(124,58,237,.40);
}
.brandTitle{ font-weight:900; font-size: 14px; letter-spacing:.3px; }
.brandSub{ color: rgba(195,189,223,.85); font-size: 12px; margin-top: 2px; }

.stepPill{
  font-size:12px;
  color: rgba(238,234,255,.80);
  border: 1px solid var(--stroke);
  background: rgba(255,255,255,.04);
  padding: 8px 10px;
  border-radius: 999px;
  backdrop-filter: blur(10px);
}

.stage{
  position:relative;
  border: 1px solid var(--stroke);
  background: rgba(255,255,255,.03);
  border-radius: var(--r);
  box-shadow: var(--shadow);
  overflow:hidden;
}

.snow{
  position:absolute; inset:0;
  pointer-events:none;
  opacity:.55;
  background-image:
    radial-gradient(circle at 10% 15%, rgba(255,255,255,.8) 0 1px, transparent 2px),
    radial-gradient(circle at 45% 25%, rgba(255,255,255,.7) 0 1px, transparent 2px),
    radial-gradient(circle at 70% 12%, rgba(255,255,255,.7) 0 1px, transparent 2px),
    radial-gradient(circle at 85% 33%, rgba(255,255,255,.65) 0 1px, transparent 2px),
    radial-gradient(circle at 25% 60%, rgba(255,255,255,.55) 0 1px, transparent 2px),
    radial-gradient(circle at 62% 78%, rgba(255,255,255,.6) 0 1px, transparent 2px);
  animation: drift 10s linear infinite;
}
@keyframes drift{
  0%{ transform: translateY(-10px); }
  100%{ transform: translateY(18px); }
}
@media (prefers-reduced-motion: reduce){
  .snow{ animation:none; }
  .giftLid, .giftBox{ transition:none !important; }
  .flipInner{ transition:none !important; }
}

.screen{ display:none; padding: 18px 16px 16px; position:relative; }
.screen.active{ display:block; }

.grid{
  display:grid;
  grid-template-columns: 1.15fr .85fr;
  gap: 14px;
  align-items:stretch;
}
@media (max-width: 860px){
  .grid{ grid-template-columns: 1fr; }
  .topbar{ flex-direction:column; align-items:flex-start; }
}

.card{
  border: 1px solid var(--stroke);
  background: var(--card);
  border-radius: var(--r);
  padding: 16px;
  backdrop-filter: blur(12px);
}

.invitation{
  background:
    radial-gradient(620px 240px at 18% 12%, rgba(124,58,237,.22), transparent 62%),
    radial-gradient(520px 220px at 86% 62%, rgba(246,213,139,.12), transparent 62%),
    linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
}

.sealRow{
  display:flex;
  justify-content:space-between;
  gap:10px;
  flex-wrap:wrap;
  margin-bottom: 10px;
}
.seal{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:8px 10px;
  border-radius: 999px;
  background: rgba(0,0,0,.25);
  border: 1px solid rgba(246,213,139,.35);
  color: rgba(246,213,139,.95);
  font-size:12px;
  letter-spacing:.35px;
}
.miniTag{
  font-size:12px;
  color: rgba(238,234,255,.7);
  border: 1px solid rgba(255,255,255,.12);
  padding: 8px 10px;
  border-radius: 999px;
  background: rgba(0,0,0,.14);
}

.h1{ margin:0 0 10px; font-size: 24px; line-height:1.15; letter-spacing:.2px; }
.h2{ margin:0 0 8px; font-size: 18px; letter-spacing:.2px; }
.p{ margin:0 0 10px; line-height:1.58; font-size: 14px; color: rgba(238,234,255,.90); }
.p.soft{ color: rgba(195,189,223,.92); }
.accent{ color: var(--purple2); }

.divider{ height:1px; background: rgba(255,255,255,.12); margin: 12px 0; }

.hint{
  margin: 10px 0 0;
  font-size: 12px;
  color: rgba(195,189,223,.92);
  line-height:1.5;
}

.list{ margin: 0; padding-left: 18px; color: rgba(238,234,255,.86); line-height:1.6; font-size: 14px; }

.note{
  margin-top: 12px;
  border: 1px solid rgba(255,255,255,.12);
  border-radius: 16px;
  padding: 12px;
  background: rgba(0,0,0,.16);
}
.noteTitle{
  font-weight:800;
  font-size: 13px;
  color: rgba(246,213,139,.95);
  margin-bottom: 6px;
}
.noteText{ font-size: 13px; color: rgba(238,234,255,.86); line-height:1.5; }

.lockBanner{
  border: 1px solid rgba(246,213,139,.18);
  background: rgba(0,0,0,.20);
  color: rgba(246,213,139,.92);
  border-radius: 16px;
  padding: 10px 12px;
  font-weight: 800;
  font-size: 12px;
  margin-top: 10px;
}
.bonusLocked{
  margin-top: 12px;
  border: 1px solid rgba(255,255,255,.12);
  border-radius: 16px;
  padding: 12px;
  background: rgba(0,0,0,.16);
  color: rgba(195,189,223,.92);
  font-weight:800;
  font-size: 12px;
  line-height:1.5;
}

.btnRow{ display:flex; gap:10px; flex-wrap:wrap; margin-top: 12px; }
.btn{
  border: 1px solid rgba(255,255,255,.16);
  background: rgba(255,255,255,.06);
  color: var(--ink);
  padding: 11px 12px;
  border-radius: 14px;
  cursor:pointer;
  font-weight:800;
  letter-spacing:.2px;
  transition: transform .08s ease, background .15s ease, border-color .15s ease;
}
.btn:hover{ background: rgba(255,255,255,.09); border-color: rgba(255,255,255,.22); }
.btn:active{ transform: translateY(1px) scale(.99); }
.btn.primary{
  background: linear-gradient(135deg, rgba(124,58,237,.92), rgba(167,139,250,.76));
  border-color: rgba(255,255,255,.22);
}
.btn.gold{
  background: linear-gradient(135deg, rgba(246,213,139,.98), rgba(124,58,237,.34));
  color: #140a1c;
  border-color: rgba(246,213,139,.55);
}

.giftWrap{ display:grid; place-items:center; min-height: 280px; position:relative; }
.gift{
  position:relative;
  width: 200px;
  height: 168px;
  transform: translateY(4px);
  outline:none;
}
.gift:focus-visible{ box-shadow: 0 0 0 3px rgba(167,139,250,.35); border-radius: 18px; }
.giftBox{
  position:absolute; bottom:0; left:0; right:0;
  height: 126px;
  border-radius: 18px;
  background: linear-gradient(180deg, rgba(124,58,237,.86), rgba(30,12,45,.92));
  border: 1px solid rgba(255,255,255,.16);
  box-shadow: 0 20px 60px rgba(0,0,0,.55);
  transition: transform .35s ease;
}
.giftLid{
  position:absolute; top: 10px; left: -6px; right:-6px;
  height: 56px;
  border-radius: 16px;
  background: linear-gradient(180deg, rgba(167,139,250,.92), rgba(124,58,237,.72));
  border: 1px solid rgba(255,255,255,.16);
  transform-origin: left bottom;
  transition: transform .55s cubic-bezier(.2,.9,.1,1);
  box-shadow: 0 14px 35px rgba(0,0,0,.45);
}
.giftRibbonV, .giftRibbonH{
  position:absolute;
  background: linear-gradient(180deg, rgba(246,213,139,.98), rgba(215,215,227,.75));
  box-shadow: 0 0 18px rgba(246,213,139,.15);
}
.giftRibbonV{ width: 18px; top: 18px; bottom: 0; left: 50%; transform: translateX(-50%); border-radius: 10px; }
.giftRibbonH{ height: 18px; left:0; right:0; top: 60px; border-radius: 10px; }
.giftBow{
  position:absolute; top: 2px; left: 50%; transform: translateX(-50%);
  width: 56px; height: 30px;
  background:
    radial-gradient(circle at 25% 50%, rgba(246,213,139,.98) 0 12px, transparent 13px),
    radial-gradient(circle at 75% 50%, rgba(246,213,139,.98) 0 12px, transparent 13px),
    radial-gradient(circle at 50% 72%, rgba(246,213,139,.98) 0 6px, transparent 7px);
  filter: drop-shadow(0 10px 16px rgba(0,0,0,.35));
  opacity:.95;
}
.gift.open .giftLid{ transform: rotate(-26deg) translate(-24px, -14px); }
.gift.open .giftBox{ transform: translateY(6px); }

.revealBadge{
  position:absolute;
  bottom: 22px;
  padding: 10px 12px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(0,0,0,.25);
  color: rgba(246,213,139,.95);
  font-size: 12px;
  letter-spacing:.25px;
  opacity:0;
  transform: translateY(8px);
  transition: opacity .25s ease, transform .25s ease;
}
.revealBadge.show{ opacity:1; transform: translateY(0); }

.microGrid{
  display:grid;
  grid-template-columns: 1.1fr .9fr;
  gap: 12px;
  margin-top: 10px;
}
@media (max-width: 880px){
  .microGrid{ grid-template-columns: 1fr; }
}
.microCard{
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(0,0,0,.16);
  border-radius: 18px;
  padding: 12px;
}
.microTitle{ font-weight:900; color: rgba(238,234,255,.92); font-size: 14px; }
.microSub{ color: rgba(195,189,223,.92); font-size: 12px; margin-top: 4px; line-height:1.5; }

/* Tarjetas */
.flipGrid{
  display:grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 10px;
  margin-top: 10px;
}
@media (min-width: 920px){
  .flipGrid{ grid-template-columns: repeat(3, minmax(0, 1fr)); }
}
@media (max-width: 420px){
  .flipGrid{ grid-template-columns: 1fr; }
}

.flipCard{
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.05);
  border-radius: 16px;
  padding: 0;
  cursor:pointer;
  min-height: 128px;
  perspective: 900px;
  -webkit-tap-highlight-color: transparent;
}
.flipInner{
  display:block;
  position:relative;
  width:100%;
  height: 128px;
  border-radius: 16px;

  transform-style: preserve-3d;
  -webkit-transform-style: preserve-3d;
  will-change: transform;

  transition: transform .55s cubic-bezier(.2,.9,.1,1);
  overflow:hidden;
}
.flipCard.flipped .flipInner{ transform: rotateY(180deg); }

.flipFront, .flipBack{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  padding: 10px 12px;
  border-radius: 16px;

  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  transform: translateZ(0);
  -webkit-transform: translateZ(0);

  text-align:center;
  line-height:1.25;

  /* ✅ evita “Sopre sa” */
  word-break: normal;
  overflow-wrap: break-word;
  hyphens: auto;
}
.flipFront{
  font-weight:900;
  color: rgba(238,234,255,.90);
  font-size: 13px;
}
.flipBack{
  transform: rotateY(180deg);
  font-weight:800;
  color: rgba(246,213,139,.92);
  font-size: 13px;
  background: radial-gradient(260px 120px at 50% 30%, rgba(124,58,237,.25), rgba(0,0,0,.10));
}

.pepTalkBox{ margin-top: 10px; }
.pepTalkOut{
  border: 1px solid rgba(255,255,255,.14);
  border-radius: 16px;
  background: rgba(0,0,0,.18);
  padding: 12px;
  min-height: 56px;
  color: rgba(238,234,255,.90);
  line-height:1.55;
}

.energyBox{
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(0,0,0,.16);
  border-radius: 18px;
  padding: 12px;
}
.energyTop{ display:flex; align-items:flex-start; justify-content:space-between; gap:10px; }
.energyValue{
  font-weight:1000;
  color: rgba(246,213,139,.92);
  background: rgba(0,0,0,.2);
  border: 1px solid rgba(246,213,139,.18);
  padding: 8px 10px;
  border-radius: 999px;
  font-size: 12px;
  white-space:nowrap;
}
input[type="range"]{ width:100%; margin-top: 10px; }
.energyLine{ margin-top: 8px; font-size: 13px; color: rgba(238,234,255,.86); }

.photos{
  display:grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 12px;
  margin-top: 10px;
}
@media (max-width: 520px){
  .photos{ grid-template-columns: 1fr; }
}
.photoCard{
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(0,0,0,.18);
  border-radius: 20px;
  padding: 12px;
}
.photoHead{
  display:flex; justify-content:space-between; gap:10px;
  margin-bottom: 10px; align-items:baseline;
}
.photoTitle{ font-size: 13px; font-weight:900; color: rgba(238,234,255,.88); }
.photoMeta{ font-size: 12px; color: rgba(195,189,223,.88); }
.photo{
  width:100%;
  aspect-ratio: 1 / 1;
  border-radius: 18px;
  object-fit: cover;
  object-position: center;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.05);
  display:block;
}
.fileRow{ margin-top: 10px; }
input[type="file"]{ width:100%; color: rgba(238,234,255,.78); }

.switchRow{
  display:flex;
  align-items:center;
  gap:10px;
  margin-top: 10px;
  font-size: 13px;
  color: rgba(238,234,255,.86);
}
.formGrid{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
  margin-top: 8px;
}
@media (max-width: 700px){
  .formGrid{ grid-template-columns: 1fr; }
}
.label{
  display:block;
  margin: 0 0 6px;
  font-size: 12px;
  color: rgba(195,189,223,.95);
  letter-spacing:.2px;
}
.mt12{ margin-top: 12px; }

.input{
  width:100%;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(0,0,0,.18);
  color: var(--ink);
  padding: 11px 12px;
  outline:none;
  font-size: 14px;
}
.textarea{
  width:100%;
  min-height: 170px;
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(0,0,0,.18);
  color: var(--ink);
  padding: 12px;
  outline:none;
  line-height:1.6;
  font-size: 14px;
  resize: vertical;
}

.lockable:disabled{ opacity: .55; cursor: not-allowed; }

.phrases{ display:grid; gap:10px; margin-top: 10px; }
.phraseRow{
  display:grid;
  grid-template-columns: 34px 1fr;
  gap:10px;
  align-items:center;
}
.chip{
  display:grid;
  place-items:center;
  width:34px; height:34px;
  border-radius: 12px;
  background: rgba(124,58,237,.25);
  border: 1px solid rgba(255,255,255,.12);
  color: rgba(238,234,255,.92);
  font-weight:900;
}

.canvasWrap{
  border: 1px solid rgba(255,255,255,.14);
  border-radius: 20px;
  background: rgba(0,0,0,.18);
  padding: 12px;
}
canvas{
  width:100%;
  height:auto;
  border-radius: 16px;
  display:block;
  background: rgba(255,255,255,.02);
}

.navBar{
  display:flex;
  justify-content:space-between;
  gap:10px;
  padding: 12px 16px 16px;
  flex-wrap:wrap;
  border-top: 1px solid rgba(255,255,255,.10);
}

.shareHint{
  margin-top: 10px;
  font-size: 12px;
  color: rgba(195,189,223,.92);
  line-height: 1.5;
}
/* =========================
   Modal (Tarjetas sorpresa)
========================= */
body.modalOpen{ overflow:hidden; }

.modal{
  position: fixed;
  inset: 0;
  display: none;
  align-items: center;
  justify-content: center;
  padding: 18px;
  background: rgba(0,0,0,.62);
  backdrop-filter: blur(8px);
  z-index: 9999;
}
.modal.show{ display:flex; }

.modalDialog{
  width: min(560px, 100%);
  border-radius: 24px;
  background: linear-gradient(180deg, rgba(35,16,53,.96), rgba(15,8,24,.96));
  border: 1px solid rgba(246,213,139,.22);
  box-shadow: 0 30px 90px rgba(0,0,0,.70);
  overflow: hidden;
}

.modalHead{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  padding: 14px 14px 10px;
  border-bottom: 1px solid rgba(255,255,255,.10);
}

.modalTitle{
  font-size: 18px;
  font-weight: 900;
  letter-spacing: .2px;
  color: rgba(246,213,139,.95);
}

.modalClose{
  width: 42px;
  height: 42px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.06);
  color: rgba(238,234,255,.92);
  cursor: pointer;
}
.modalClose:hover{ background: rgba(255,255,255,.10); }

.modalBody{
  padding: 16px 14px;
  color: rgba(238,234,255,.92);
  font-size: 16px;
  line-height: 1.55;
  white-space: pre-wrap;
}

.modalBody::before{
  content:"“";
  color: rgba(167,139,250,.55);
  font-weight: 900;
  font-size: 28px;
  margin-right: 6px;
}
.modalBody::after{
  content:"”";
  color: rgba(167,139,250,.55);
  font-weight: 900;
  font-size: 28px;
  margin-left: 6px;
}

.modalActions{
  padding: 0 14px 14px;
  display:flex;
  justify-content:flex-end;
}
/* =========================
   Flip fallback (sin 3D)
========================= */
.flipCard{ position:relative; overflow:hidden; }
.flipInner{ position:relative; width:100%; height:100%; display:block; }
.flipFront, .flipBack{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:12px;
  text-align:center;
  line-height:1.25;
  pointer-events:none; /* el click lo recibe el button */
}
.flipBack{
  opacity:0;
  transform: scale(.98);
  color: rgba(238,234,255,.92);
}
.flipCard.flipped .flipBack{ opacity:1; transform: scale(1); }
.flipCard.flipped .flipFront{ opacity:0; }

/* =========================
   Modal (Tarjetas sorpresa)
========================= */
body.modalOpen{ overflow:hidden; }

.modal{
  position: fixed;
  inset: 0;
  display: none;
  align-items: center;
  justify-content: center;
  padding: 18px;
  background: rgba(0,0,0,.62);
  backdrop-filter: blur(8px);
  z-index: 9999;
}
.modal.show{ display:flex; }

.modalDialog{
  width: min(560px, 100%);
  border-radius: 24px;
  background: linear-gradient(180deg, rgba(35,16,53,.96), rgba(15,8,24,.96));
  border: 1px solid rgba(246,213,139,.22);
  box-shadow: 0 30px 90px rgba(0,0,0,.70);
  overflow: hidden;
}

.modalHead{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  padding: 14px 14px 10px;
  border-bottom: 1px solid rgba(255,255,255,.10);
}

.modalTitle{
  font-size: 18px;
  font-weight: 900;
  letter-spacing: .2px;
  color: rgba(246,213,139,.95);
}

.modalClose{
  width: 42px;
  height: 42px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.06);
  color: rgba(238,234,255,.92);
  cursor: pointer;
}
.modalClose:hover{ background: rgba(255,255,255,.10); }

.modalBody{
  padding: 16px 14px;
  color: rgba(238,234,255,.92);
  font-size: 16px;
  line-height: 1.55;
  white-space: pre-wrap;
}

.modalActions{
  padding: 0 14px 14px;
  display:flex;
  justify-content:flex-end;
}
/* SOLO MODAL: nunca mostrar el back dentro de las tarjetas */
.flipBack{ display:none !important; }
.flipFront{
  hyphens: none;
  word-break: keep-all;
  overflow-wrap: normal;
  white-space: normal;
}
/* =========================
   Grid adaptable: 1 col / 2 col
========================= */
.grid{
  display: grid;
  gap: 18px;
  align-items: start;
}

/* 1 columna (cuando quitaste los aside) */
.grid.one{
  grid-template-columns: minmax(0, 1fr);
  justify-items: center; /* centra el contenido */
}
.grid.one > .card{
  width: min(920px, 100%); /* evita que quede chiquito a la izquierda */
}

/* 2 columnas (cuando SÍ hay aside) */
.grid.two{
  grid-template-columns: minmax(0, 1fr) minmax(280px, 420px);
  align-items: start;
}

/* En móvil: siempre 1 columna */
@media (max-width: 980px){
  .grid.two{
    grid-template-columns: minmax(0, 1fr);
    justify-items: stretch;
  }
  .grid.one > .card{
    width: 100%;
  }
}
